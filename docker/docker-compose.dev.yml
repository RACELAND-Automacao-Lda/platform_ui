version: '3'
services:
  server:
    build:
      context: ../.
      dockerfile: docker/nginx/Dockerfile.dev
    image: core-ui-nginx
    ports:
      - '18104:80' # Connect localhost 18104 port to container 80 port
    links:
      - react:react
    volumes:
      - /opt/platform:/opt/platform
  react:
    build:
      context: ../.
      dockerfile: docker/react/Dockerfile.dev
    image: core-ui-react
    environment:
      - NODE_ENV=development
    volumes: # For webpack dev server to use our local files
      - ./..:/usr/src/react
    ports:
      - '3000:3000' # For docker to now where to redirect HMR queries
